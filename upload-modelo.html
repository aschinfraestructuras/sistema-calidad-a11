<!DOCTYPE html>
<html>
<head>
    <title>Upload Modelo</title>
</head>
<body>
    <h1>Upload do Modelo HTML</h1>
    <button onclick="uploadModelo()">Subir Modelo</button>
    <div id="resultado"></div>

    <script>
        async function uploadModelo() {
            try {
                // Ler o arquivo HTML
                const response = await fetch('docs/07_Equipos_Maquinaria_Tajos/registro-equipos-maquinaria-tajos.html');
                const htmlContent = await response.text();
                
                // Converter para Base64
                const base64Content = btoa(unescape(encodeURIComponent(htmlContent)));
                
                // Criar objeto do documento
                const documento = {
                    titulo: 'Registro de Equipos y Maquinaria por Tajo',
                    fileName: 'registro-equipos-maquinaria-tajos.html',
                    fileData: 'data:text/html;base64,' + base64Content,
                    chapter: '07',
                    tags: ['equipos', 'maquinaria', 'tajo', 'html', 'modelo'],
                    uploadDate: new Date().toISOString(),
                    tipo: 'html',
                    descripcion: 'Sistema completo de control de recursos de obra con códigos automáticos, tabelas editáveis, gestão de pessoal e equipamentos'
                };
                
                // Salvar no localStorage
                let uploadedDocs = JSON.parse(localStorage.getItem('uploadedDocuments') || '[]');
                documento.id = 'uploaded_' + Date.now();
                uploadedDocs.push(documento);
                localStorage.setItem('uploadedDocuments', JSON.stringify(uploadedDocs));
                
                document.getElementById('resultado').innerHTML = `
                    <h2>✅ Modelo subido com sucesso!</h2>
                    <p><strong>Título:</strong> ${documento.titulo}</p>
                    <p><strong>Capítulo:</strong> ${documento.chapter}</p>
                    <p><strong>ID:</strong> ${documento.id}</p>
                    <p><strong>Tags:</strong> ${documento.tags.join(', ')}</p>
                    <br>
                    <p><strong>Próximos passos:</strong></p>
                    <ol>
                        <li>Recarregue o portal (F5)</li>
                        <li>Vá ao Capítulo 07 - "Equipos, Maquinaria y Tajos"</li>
                        <li>Clique no subcapítulo 07-02 - "02 Equipos y Maquinaria"</li>
                        <li>O modelo deve aparecer como documento subido</li>
                    </ol>
                `;
                
            } catch (error) {
                document.getElementById('resultado').innerHTML = `
                    <h2>❌ Erro ao subir modelo</h2>
                    <p>Erro: ${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>
