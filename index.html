<!DOCTYPE html>
<!-- FORCE VERCEL DEPLOY - Sistema restaurado sem landing page - $(Get-Date) -->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Calidad ASCH-OHLA - Sistema de Gesti√≥n de Calidad - SEM LETRAS BONITAS</title>
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèóÔ∏è</text></svg>">
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">
                    <svg width="120" height="60" viewBox="0 0 250 60" xmlns="http://www.w3.org/2000/svg">
                        <!-- OHLA Logo -->
                        <g transform="translate(0, 0)">
                            <!-- OHLA Buildings -->
                            <rect x="5" y="25" width="3" height="20" fill="#1E3A8A"/>
                            <rect x="9" y="20" width="3" height="25" fill="#1E3A8A"/>
                            <rect x="13" y="15" width="3" height="30" fill="#1E3A8A"/>
                            <rect x="17" y="10" width="3" height="35" fill="#1E3A8A"/>
                            <rect x="21" y="5" width="3" height="40" fill="#1E3A8A"/>
                            
                            <rect x="30" y="20" width="3" height="25" fill="#0EA5E9"/>
                            <rect x="34" y="15" width="3" height="30" fill="#0EA5E9"/>
                            <rect x="38" y="10" width="3" height="35" fill="#0EA5E9"/>
                            <rect x="42" y="5" width="3" height="40" fill="#0EA5E9"/>
                            
                            <!-- OHLA Text -->
                            <text x="50" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1E3A8A">OHLA</text>
                            <text x="50" y="40" font-family="Arial, sans-serif" font-size="8" fill="#0EA5E9">Progress Enablers</text>
                        </g>
                        
                        <!-- ASCH Logo -->
                        <g transform="translate(120, 0)">
                            <!-- ASCH Text -->
                            <text x="0" y="20" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#000000">A</text>
                            
                            <!-- ASCH S (Red Wave) -->
                            <path d="M 12 8 Q 16 8, 20 12 Q 24 16, 20 20 Q 16 24, 12 24 Q 8 24, 6 20 Q 4 16, 8 12 Q 12 8, 16 8" 
                                  fill="#DC2626" stroke="none"/>
                            
                            <text x="22" y="20" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#000000">CH</text>
                            
                            <!-- ASCH Tagline -->
                            <text x="0" y="40" font-family="Arial, sans-serif" font-size="6" fill="#374151">INFRAESTRUCTURAS Y SERVICIOS</text>
                        </g>
                    </svg>
                </div>
                <h2 class="login-title">Portal de Calidad ASCH-OHLA</h2>
                <p class="login-subtitle">Obra A-11 ‚Ä¢ Sistema de Gesti√≥n de Documentos</p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="passwordInput" class="form-label">Contrase√±a de Acceso</label>
                    <div class="input-container">
                        <input type="password" id="passwordInput" class="form-input" placeholder="Ingrese la contrase√±a" autocomplete="current-password">
                        <div class="password-toggle" onclick="portal.togglePassword()">
                            <span class="toggle-icon">üëÅÔ∏è</span>
                        </div>
                    </div>
                </div>
                
                <button class="login-btn" onclick="portal.handleLogin()">
                    <span class="btn-icon">üîê</span>
                    <span class="btn-text">Acceder al Sistema</span>
                </button>
                
                <div class="login-error" id="loginError" style="display: none;">
                    <span class="error-icon">‚ö†Ô∏è</span>
                    <span class="error-text">Contrase√±a incorrecta. Intente nuevamente.</span>
                </div>
            </div>
            
            <div class="login-footer">
                <p class="footer-text">Sistema de Gesti√≥n de Calidad ‚Ä¢ UTE A11 LANGA-ARANDA</p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container">
    <!-- Header -->
    <header class="header">
            <div class="header-content">
                <div class="header-left">
                <div class="logo">
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="8" fill="#1E3A8A"/>
                            <text x="20" y="26" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">A</text>
                    </svg>
                </div>
                <div class="title-section">
                    <h1 class="navbar-brand">Portal de Calidad ASCH-OHLA</h1>
                    <h2 class="navbar-subtitle">Sistema de Gesti√≥n de Calidad ‚Ä¢ UTE A11 LANGA-ARANDA</h2>
                    <div class="navbar-project">A-11 ‚Ä¢ Langa de Duero - Aranda de Duero</div>
                </div>
            </div>
            <div class="header-actions">
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="searchInput" placeholder="Buscar documentos, tags o c√≥digos..." class="search-input">
                        <button class="search-btn" id="searchBtn">üîç</button>
                        <button class="advanced-search-btn" id="advancedSearchBtn" title="B√∫squeda Avanzada">‚öôÔ∏è</button>
                    </div>
                </div>
                <button id="uploadBtn" class="upload-btn">
                    <span class="btn-icon">üì§</span>
                    <span class="btn-text">Subir Documento</span>
                </button>
                <button id="dashboardBtn" class="dashboard-btn">
                    <span class="btn-icon">üìä</span>
                    <span class="btn-text">Dashboard</span>
                </button>
                </div>
        </div>
    </header>

        <!-- Main Content -->
        <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>Cap√≠tulos de Calidad</h3>
                <div class="chapter-count" id="chapterCount">21 cap√≠tulos</div>
            </div>
            <div class="chapters-list" id="chaptersList">
                    <!-- Chapters will be loaded here -->
            </div>
            <div class="sidebar-footer">
                    <div class="stats">
                    <div class="stat-item">
                            <span class="stat-number" id="totalDocuments">0</span>
                        <span class="stat-label">Documentos</span>
                    </div>
                    <div class="stat-item">
                            <span class="stat-number" id="uploadedDocuments">0</span>
                        <span class="stat-label">Subidos</span>
                        </div>
                </div>
            </div>
        </aside>

            <!-- Content Area -->
            <div class="content-area">
            <!-- Welcome Section -->
            <div id="welcomeSection" class="welcome-section">
                <div class="welcome-content">
                        <h1>Bienvenido al Portal de Calidad</h1>
                        <p>Seleccione un cap√≠tulo para comenzar a gestionar los documentos de calidad.</p>
                </div>
            </div>

            <!-- Documents Section -->
            <div id="documentsSection" class="documents-section hidden">
                <div class="section-header">
                        <div class="section-info">
                        <h2 id="sectionTitle">Documentos</h2>
                        <div class="section-meta">
                                <span id="sectionCode" class="section-code"></span>
                                <span id="documentCount" class="document-count"></span>
                            </div>
                    </div>
                    <div class="section-actions">
                            <button id="addDocumentBtn" class="btn-primary">
                            <span class="btn-icon">‚ûï</span>
                                <span class="btn-text">Agregar Documento</span>
                        </button>
                    </div>
                </div>

                    <div class="documents-grid" id="documentsGrid">
                        <!-- Documents will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Document Viewer Modal -->
    <div id="viewerModal" class="viewer-modal hidden">
        <div class="viewer-header">
            <div class="viewer-title">
                    <h3 id="viewerTitle">Documento</h3>
                </div>
                <div class="viewer-actions">
                <button class="viewer-btn" onclick="portal.printDoc()" title="Imprimir">
                    <span>üñ®Ô∏è</span>
                    <span>Imprimir</span>
                </button>
                <button class="viewer-btn" onclick="portal.downloadDoc()" title="Descargar">
                    <span>üì•</span>
                    <span>Descargar</span>
                </button>
                <button class="viewer-btn" onclick="portal.editDoc()" title="Editar">
                    <span>‚úèÔ∏è</span>
                    <span>Editar</span>
                </button>
                <button class="viewer-close" onclick="portal.hideViewer()" title="Cerrar">
                    <span>‚úï</span>
                </button>
            </div>
        </div>
        <div class="viewer-content">
            <iframe id="documentFrame" class="document-frame"></iframe>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="config.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <script src="assets/app-simple.js"></script>
    <script>
        // Inicializar sistema quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            window.portal = new PortalCalidad();
        });
    </script>
</body>
</html>